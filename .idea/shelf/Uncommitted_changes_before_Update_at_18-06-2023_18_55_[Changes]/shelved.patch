Index: app/src/main/java/com/medical/medcoach/Fragment/LoginTabFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.medical.medcoach.Fragment;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.text.TextUtils;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.android.material.textfield.TextInputEditText;\r\nimport com.google.firebase.FirebaseException;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.PhoneAuthCredential;\r\nimport com.google.firebase.auth.PhoneAuthProvider;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.medical.medcoach.LoginRegisterActivity;\r\nimport com.medical.medcoach.MainActivity;\r\nimport com.medical.medcoach.R;\r\nimport com.medical.medcoach.getOTPActivity;\r\n\r\nimport java.util.Date;\r\nimport java.util.Objects;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\n\r\npublic class LoginTabFragment extends Fragment {\r\n\r\n    DatabaseReference databaseReference = FirebaseDatabase.getInstance().getReferenceFromUrl(\"https://medcoach-b742f-default-rtdb.firebaseio.com/\");\r\n    TextInputEditText log_email, log_password;\r\n    Button login_btn;\r\n    FirebaseAuth mAuth;\r\n    int counter=3;\r\n\r\n\r\n//    @Override\r\n//    public void onStart() {\r\n//        super.onStart();\r\n//        // Check if user is signed in (non-null) and update UI accordingly.\r\n//        FirebaseUser currentUser = mAuth.getCurrentUser();\r\n//        if(currentUser != null){\r\n//            Intent intent= new Intent(getActivity(),MainActivity.class);\r\n//            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n//            startActivity(intent);\r\n////            finish();\r\n//        }\r\n//    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_login_tab, container, false);\r\n\r\n        log_email=view.findViewById(R.id.Login_Email);\r\n        log_password=view.findViewById(R.id.Login_Password);\r\n\r\n        login_btn=view.findViewById(R.id.Login_Btn);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        login_btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String email, password;\r\n                email = String.valueOf(log_email.getText());\r\n                password = String.valueOf(log_password.getText());\r\n\r\n                if(TextUtils.isEmpty(email) && TextUtils.isEmpty(password))\r\n                {\r\n                    Toast.makeText(getActivity(),\"Enter email & Password\",Toast.LENGTH_SHORT).show();\r\n                    counter--;\r\n                } else if (email.length()==10) {\r\n                    databaseReference=FirebaseDatabase.getInstance().getReference(\"Users\");\r\n                    databaseReference.child(\"+91\"+email).get().addOnCompleteListener(new OnCompleteListener<DataSnapshot>() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task<DataSnapshot> task) {\r\n                            if (task.isSuccessful()){\r\n                                if (task.getResult().exists()){\r\n                                    DataSnapshot dataSnapshot = task.getResult();\r\n                                    String Password = String.valueOf(dataSnapshot.child(\"Password\").getValue());\r\n                                    Toast.makeText(getActivity(), Password, Toast.LENGTH_SHORT).show();\r\n\r\n                                    PhoneAuthProvider.getInstance().verifyPhoneNumber(\r\n                                            \"+91\" + email,\r\n                                            60,\r\n                                            TimeUnit.SECONDS,\r\n                                            getActivity(),\r\n                                            new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n                                                @Override\r\n                                                public void onVerificationCompleted(@NonNull PhoneAuthCredential phoneAuthCredential) {\r\n                                                    Toast.makeText(getActivity(), \"Error\", Toast.LENGTH_SHORT).show();\r\n                                                }\r\n\r\n                                                @Override\r\n                                                public void onVerificationFailed(@NonNull FirebaseException e) {\r\n                                                    Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                                                }\r\n\r\n                                                @Override\r\n                                                public void onCodeSent(@NonNull String Sendotp, @NonNull PhoneAuthProvider.ForceResendingToken forceResendingToken) {\r\n                                                    Intent intent = new Intent(getActivity(), getOTPActivity.class);\r\n                                                    intent.putExtra(\"phoneTxt\",email);\r\n                                                    intent.putExtra(\"backend\",Sendotp);\r\n                                                    startActivity(intent);\r\n                                                }\r\n                                            }\r\n                                    );\r\n\r\n                                }else {\r\n                                    Toast.makeText(getActivity(), \"User Not Exist\", Toast.LENGTH_SHORT).show();\r\n                                }\r\n                                \r\n                            }else {\r\n                                Toast.makeText(getActivity(), \"Failed\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n\r\n                        }\r\n                    });\r\n\r\n                } else {\r\n\r\n                    mAuth.signInWithEmailAndPassword(email, password)\r\n                            .addOnCompleteListener(new OnCompleteListener<AuthResult>() {\r\n                                @Override\r\n                                public void onComplete(@NonNull Task<AuthResult> task) {\r\n                                    if (task.isSuccessful()) {\r\n                                        // Sign in success, update UI with the signed-in user's information\r\n                                        Toast.makeText(getActivity(), \"Login Successful.\",\r\n                                                Toast.LENGTH_SHORT).show();\r\n                                        Intent intent= new Intent(getActivity(),MainActivity.class);\r\n                                        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n                                        startActivity(intent);\r\n//                                        finish();\r\n\r\n                                    } else {\r\n                                        // If sign in fails, display a message to the user.\r\n                                        Toast.makeText(getActivity(), \"Login failed.\",Toast.LENGTH_SHORT).show();\r\n\r\n                                    }\r\n                                }\r\n                            });\r\n//                    Toast.makeText(Login.this,\"Invalid Credentials\",Toast.LENGTH_SHORT).show();\r\n//                    counter--;\r\n                }\r\n                if(counter==0){\r\n                    Toast.makeText(getActivity(),\"failed to login attempts\",Toast.LENGTH_SHORT).show();\r\n                    login_btn.setEnabled(false);\r\n                }\r\n\r\n            }\r\n\r\n        });\r\n\r\n\r\n\r\n        return view;\r\n\r\n    }\r\n\r\n    private boolean validateEmail(){\r\n        String email = Objects.requireNonNull(log_email.getText()).toString().trim();\r\n\r\n        if (email.isEmpty()){\r\n            log_email.setError(\"Field can't be Empty\");\r\n            return false;\r\n        }\r\n        else {\r\n            log_email.setError(null);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    private boolean validatePassword(){\r\n        String password = Objects.requireNonNull(log_password.getText()).toString().trim();\r\n\r\n        if (password.isEmpty()){\r\n            log_password.setError(\"Field can't be Empty\");\r\n            return false;\r\n        }\r\n        else {\r\n            log_password.setError(null);\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public  void confirmInput(View v){\r\n        if (!validateEmail() | !validatePassword()){\r\n            return;\r\n        }\r\n        String input = \"email: \" + log_email.getText().toString();\r\n        input +=\"\\n\";\r\n        input = \"Password: \" + log_password.getText().toString();\r\n\r\n        Toast.makeText(getActivity(), \"Please Enter\", Toast.LENGTH_SHORT).show();\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/medical/medcoach/Fragment/LoginTabFragment.java b/app/src/main/java/com/medical/medcoach/Fragment/LoginTabFragment.java
--- a/app/src/main/java/com/medical/medcoach/Fragment/LoginTabFragment.java	(revision b39014bb38680ac153a63bf312abf1479aa88c30)
+++ b/app/src/main/java/com/medical/medcoach/Fragment/LoginTabFragment.java	(date 1687093613071)
@@ -46,18 +46,18 @@
     int counter=3;
 
 
-//    @Override
-//    public void onStart() {
-//        super.onStart();
-//        // Check if user is signed in (non-null) and update UI accordingly.
-//        FirebaseUser currentUser = mAuth.getCurrentUser();
-//        if(currentUser != null){
-//            Intent intent= new Intent(getActivity(),MainActivity.class);
-//            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TASK);
-//            startActivity(intent);
-////            finish();
-//        }
-//    }
+    @Override
+    public void onStart() {
+        super.onStart();
+        // Check if user is signed in (non-null) and update UI accordingly.
+        FirebaseUser currentUser = mAuth.getCurrentUser();
+        if(currentUser != null){
+            Intent intent= new Intent(getActivity(),MainActivity.class);
+            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TASK);
+            startActivity(intent);
+//            finish();
+        }
+    }
 
 
     @Override
